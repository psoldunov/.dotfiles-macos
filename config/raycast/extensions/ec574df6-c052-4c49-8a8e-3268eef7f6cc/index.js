var k=Object.create;var p=Object.defineProperty,C=Object.defineProperties,P=Object.getOwnPropertyDescriptor,x=Object.getOwnPropertyDescriptors,v=Object.getOwnPropertyNames,E=Object.getOwnPropertySymbols,F=Object.getPrototypeOf,T=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var S=(t,e,n)=>e in t?p(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,f=(t,e)=>{for(var n in e||(e={}))T.call(e,n)&&S(t,n,e[n]);if(E)for(var n of E(e))O.call(e,n)&&S(t,n,e[n]);return t},d=(t,e)=>C(t,x(e)),N=t=>p(t,"__esModule",{value:!0});var R=(t,e)=>{for(var n in e)p(t,n,{get:e[n],enumerable:!0})},q=(t,e,n,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of v(e))!T.call(t,a)&&(n||a!=="default")&&p(t,a,{get:()=>e[a],enumerable:!(s=P(e,a))||s.enumerable});return t},D=(t,e)=>q(N(p(t!=null?k(F(t)):{},"default",!e&&t&&t.__esModule?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t),U=(t=>(e,n)=>t&&t.get(e)||(n=q(N({}),e,1),t&&t.set(e,n),n))(typeof WeakMap!="undefined"?new WeakMap:0);var b={};R(b,{default:()=>A});var i=require("@raycast/api"),u=require("react");var r=require("@raycast/api");async function $(){return(await(0,r.getApplications)()).some(({bundleId:e})=>e==="com.dmitrynikolaev.numi"||e==="com.nikolaeu.numi-setapp"||e==="com.nikolaeu.numi")}async function L(){if(!await $()){let t={style:r.Toast.Style.Failure,title:"Numi is not installed.",message:"Install it from: https://numi.app/",primaryAction:{title:"Go to https://numi.app/",onAction:e=>{(0,r.open)("https://numi.app/"),e.hide()}}};await(0,r.showToast)(t)}}var w=D(require("http")),h=t=>new Promise((e,n)=>{if(t){let s="",a=w.default.request({port:15055,method:"GET",path:`/?q=${encodeURIComponent(t)}`},l=>{l.on("data",g=>{s=`${s} ${g}`}),l.on("end",()=>{e([s])})});a.on("error",l=>{n(l)}),a.end()}else e([""])});function A(){let[t,e]=(0,u.useState)(void 0),[n,s]=(0,u.useState)({isLoading:!0}),[a,l]=(0,u.useState)(void 0),g=5e3,I=o=>{h(o).then(c=>{a&&a.hide(),s(m=>d(f({},m),{results:c,isLoading:!1}))}).catch(c=>{c.message.includes("ECONNREFUSED")&&(e(!1),s(m=>d(f({},m),{isLoading:!1}))),(0,i.showToast)({style:i.Toast.Style.Failure,title:"Something went wrong",message:"Please make sure Numi is running"}).then(m=>l).catch(m=>console.error("Error Creating Toast"))})},y=()=>{h("1").then(()=>e(!0)).catch(o=>{o.message.includes("ECONNREFUSED")&&e(!1)})};return(0,u.useEffect)(()=>{t||y();let o=setInterval(()=>{t||y()},g);return clearInterval(o)},[]),(0,u.useEffect)(()=>{let o=n.query?.trim()??"";!n.isLoading||I(o)},[n]),L(),_jsx(i.List,{searchBarPlaceholder:"Enter text to query",onSearchTextChange:o=>{s(c=>d(f({},c),{query:o,isLoading:!0}))},isLoading:n.isLoading},_jsx(i.List.EmptyView,{icon:"empty-view.png",title:t===!1?"Numi is not running":"Waiting for query...",description:t===!1?"Start Numi and enable Alfred integration":"E.g.: 1+5..."}),n.results&&n.results.map((o,c)=>{if(o)return _jsx(i.List.Item,{key:c,title:o,icon:i.Icon.Text,actions:_jsx(i.ActionPanel,null,_jsx(i.Action.CopyToClipboard,{content:o}),_jsx(i.Action.Paste,{content:o}))})}))}module.exports=U(b);0&&(module.exports={});
